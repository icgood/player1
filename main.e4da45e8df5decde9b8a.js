!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/player1/",n(n.s=39)}([function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"a",(function(){return i}));var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.callbacks=new Set,this.onceCallbacks=new WeakSet}var e,n,i;return e=t,(n=[{key:"on",value:function(t){return this.callbacks.add(t),this}},{key:"once",value:function(t){return this.onceCallbacks.add(t),this.on(t)}},{key:"until",value:function(t,e){var n=this;return t&&t.once((function(){return n.callbacks.delete(e)})),this.on(e)}},{key:"trigger",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this.triggerUntil.apply(this,[null,t].concat(n))}},{key:"triggerUntil",value:function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.emit.apply(e,r.concat(n))};return this.until(t,o)}},{key:"topic",value:function(e){var n=new t;return this.on((function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];t===e&&n.emit.apply(n,i)})),n}},{key:"emit",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=this.onceCallbacks;return this.callbacks.forEach((function(e){i.has(e)&&t.callbacks.delete(e),e.apply(void 0,n)})),this}}])&&r(e.prototype,n),i&&r(e,i),t}()},function(t,e,n){"use strict";e.a={dtCoefficient:.001,shuttleRotation:4,shuttleAcceleration:400,shuttleMaxVelocity:600,bulletVelocity:1e3,bulletDecay:1300,laserDecay:400,starfieldSize:100,newRockChance:.4,newCrystalChance:.4,newPowerupChance:.4,rockVelocityDist:{mu:75,sigma:20},rockSizeDist:{mu:2,sigma:.25},rockSpinSpeed:1,rockRicochet:200,initTimeLimit:1,initBalance:0,backgroundColor:"#231f20",viewbox:{width:2436,height:1125},keyBindings:{32:"fire",38:"accelerate",37:"turnLeft",40:null,39:"turnRight",87:"accelerate",65:"turnLeft",83:null,68:"turnRight"},mouseBindings:{move:"focus",click:"accelerate",middleClick:null,rightClick:"fire"},actionIntervals:{fire:750,focus:100},serverUrl:"wss://player1-server.herokuapp.com/",serverGameExpiration:1e4}},function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return u})),n.d(e,"b",(function(){return s})),n.d(e,"f",(function(){return c})),n.d(e,"a",(function(){return a})),n.d(e,"e",(function(){return f}));var r=Math.PI,i=2*Math.PI;function o(t,e){return Math.sin(t)*e}function u(t,e){return-Math.cos(t)*e}function s(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function c(t){for(;t>=i;)t-=i;for(;t<0;)t+=i;return t}function a(t,e,n,i){var o=n-t,u=i-e,s=Math.atan(-o/u);return u<0?s:s+r}function f(t,e){var n=c(e)-c(t);return n>r?n-i:n<-r?n+i:n}},function(t,e,n){var r=n(14),i=n(15),o=n(16),u=n(41);function s(t){if(!(this instanceof s))return o.fn(t)?s.app.apply(s,arguments):o.object(t)?s.atlas.apply(s,arguments):t;r.create++;for(var e=0;e<c.length;e++)c[e].call(this)}r.create=0;var c=[];s._init=function(t){c.push(t)};var a=[];s._load=function(t){a.push(t)};var f={};s.config=function(){if(1===arguments.length&&o.string(arguments[0]))return f[arguments[0]];1===arguments.length&&o.object(arguments[0])&&i(f,arguments[0]),2===arguments.length&&o.string(arguments[0])};var h=[],l=[],p=!1,y=!1;s.app=function(t,e){if(p){var n=s.config("app-loader");n((function(e,n){for(var r=0;r<a.length;r++)a[r].call(this,e,n);t(e,n),l.push(e),e.start()}),e)}else h.push(arguments)};var v=u();s.preload=function(t){if("string"==typeof t){var e=s.resolve(t);/\.js($|\?|\#)/.test(e)&&(t=function(t){!function(t,e){var n=document.createElement("script");n.addEventListener("load",(function(){e()})),n.addEventListener("error",(function(n){e(n||"Error loading script: "+t)})),n.src=t,n.id="preload-"+Date.now(),document.body.appendChild(n)}(e,t)})}"function"==typeof t&&t(v())},s.start=function(t){s.config(t),v.then((function(){for(p=!0;h.length;){var t=h.shift();s.app.apply(s,t)}}))},s.pause=function(){if(!y){y=!0;for(var t=l.length-1;t>=0;t--)l[t].pause()}},s.resume=function(){if(y){y=!1;for(var t=l.length-1;t>=0;t--)l[t].resume()}},s.create=function(){return new s},s.resolve=function(){if("undefined"==typeof window||"undefined"==typeof document)return function(t){return t};var t=document.getElementsByTagName("script");return function(e){if(/^\.\//.test(e)){var n=function(){if(document.currentScript)return document.currentScript.src;var e;try{var n=new Error;if(!n.stack)throw n;e=n.stack}catch(n){e=n.stack}if("string"==typeof e)for(var r=(e=e.split("\n")).length;r--;){var i=e[r].match(/(\w+\:\/\/[^/]*?\/.+?)(:\d+)(:\d+)?/);if(i)return i[1]}if(t.length&&"readyState"in t[0])for(r=t.length;r--;)if("interactive"===t[r].readyState)return t[r].src;return location.href}();e=n.substring(0,n.lastIndexOf("/")+1)+e.substring(2)}return e}}(),t.exports=s},function(t,e,n){"use strict";var r=n(0);var i=n.p+"8ec31040ddfdc510f7a75a92318195ae.wav",o=n.p+"c72fec57278cc3c9f61f1809f1f6eb1e.wav",u=n.p+"ae30667cee8100552d5bb8da95b757db.wav",s=n.p+"a8ea40c741b3dcbb056c688b719b68ae.wav",c=n.p+"8ef5c0ed0d97605f16f743e953378f57.wav",a=n.p+"705b4bf40b2fc741fc5db5903349efd5.wav";e.a={crystalCapture:f(i),powerupCapture:f(o),crystalSpawn:f(u),explosion:f(s),shootBullet:f(c),shootLaser:f(a)};function f(t){var e,n,i,o=document.createElement("audio");return o.src=(e=t,n="audio",(i=document.createElement("link")).rel="preload",i.href=e,i.as=n,document.head.appendChild(i),e),(new r.a).on((function(){return o.play()}))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(2),i=n(0);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;o(this,t),this.node=e,this.offsetX=n,this.offsetY=r,this.rotation=u,this.scale=s,this.remove=new i.a,this.broker=new i.a,this.sync=new i.a}var e,n,s;return e=t,(n=[{key:"append",value:function(t){t.append(this.node)}},{key:"start",value:function(t){var e=this;this.append(t),this.node.pin({align:.5,offsetX:this.offsetX,offsetY:this.offsetY,rotation:this.rotation,scale:this.scale}),this.node.tick((function(n){return e.tick(n,t)})),this.remove.on((function(){return e.node.remove()}))}},{key:"tick",value:function(t,e){}},{key:"touching",value:function(t){var e=this.radius+t.radius;return!(!this.visible||!t.visible||Math.abs(this.offsetX-t.offsetX)>e||Math.abs(this.offsetY-t.offsetY)>e)&&r.b(this.offsetX,this.offsetY,t.offsetX,t.offsetY)<=e}},{key:"moveTo",value:function(t,e){this.offsetX=t,this.offsetY=e,this.node.pin({offsetX:t,offsetY:e})}},{key:"rotateTo",value:function(t){this.rotation=r.f(t),this.node.pin("rotation",t)}},{key:"scaleTo",value:function(t){this.scale=t,this.node.pin("scale",t)}},{key:"save",value:function(t,e){}},{key:"load",value:function(t,e,n){}},{key:"radius",get:function(){return this.node.width()*this.node.pin("scaleX")/2}},{key:"visible",get:function(){return null!=this.node.parent()}}])&&u(e.prototype,n),s&&u(e,s),t}()},function(t,e,n){"use strict";function r(t,e){return Math.random()*(e-t)+t}function i(t){for(var e=[],n="0".charCodeAt(0),r="a".charCodeAt(0),i=0;i<t;i++){var o=Math.floor(16*Math.random());o<10?e.push(n+o):e.push(r+o-10)}return String.fromCharCode.apply(String,e)}n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i}))},function(t,e,n){t.exports=n(40),t.exports.internal={},n(48),t.exports.internal.Image=n(49),n(51),n(52),n(53),n(54),t.exports.Mouse=n(56),t.exports.Math=n(20),t.exports._extend=n(15),t.exports._create=n(8),n(57)},function(t,e){if("function"==typeof Object.create)t.exports=function(t,e){return Object.create.call(Object,t,e)};else{function n(){}t.exports=function(t,e){if(e)throw Error("Second argument is not supported!");if("object"!=typeof t||null===t)throw Error("Invalid prototype!");return n.prototype=t,new n}}},function(t,e,n){var r=n(3),i=n(22),o=0;function u(t){this._owner=t,this._parent=null,this._relativeMatrix=new i,this._absoluteMatrix=new i,this.reset()}r._init((function(){this._pin=new u(this)})),r.prototype.matrix=function(t){return!0===t?this._pin.relativeMatrix():this._pin.absoluteMatrix()},r.prototype.pin=function(t,e){return"object"==typeof t?(this._pin.set(t),this):"string"==typeof t?void 0===e?this._pin.get(t):(this._pin.set(t,e),this):void 0===t?this._pin:void 0},u.prototype.reset=function(){this._textureAlpha=1,this._alpha=1,this._width=0,this._height=0,this._scaleX=1,this._scaleY=1,this._skewX=0,this._skewY=0,this._rotation=0,this._pivoted=!1,this._pivotX=null,this._pivotY=null,this._handled=!1,this._handleX=0,this._handleY=0,this._aligned=!1,this._alignX=0,this._alignY=0,this._offsetX=0,this._offsetY=0,this._boxX=0,this._boxY=0,this._boxWidth=this._width,this._boxHeight=this._height,this._ts_translate=++o,this._ts_transform=++o,this._ts_matrix=++o},u.prototype._update=function(){return this._parent=this._owner._parent&&this._owner._parent._pin,this._handled&&this._mo_handle!=this._ts_transform&&(this._mo_handle=this._ts_transform,this._ts_translate=++o),this._aligned&&this._parent&&this._mo_align!=this._parent._ts_transform&&(this._mo_align=this._parent._ts_transform,this._ts_translate=++o),this},u.prototype.toString=function(){return this._owner+" ("+(this._parent?this._parent._owner:null)+")"},u.prototype.absoluteMatrix=function(){this._update();var t=Math.max(this._ts_transform,this._ts_translate,this._parent?this._parent._ts_matrix:0);if(this._mo_abs==t)return this._absoluteMatrix;this._mo_abs=t;var e=this._absoluteMatrix;return e.reset(this.relativeMatrix()),this._parent&&e.concat(this._parent._absoluteMatrix),this._ts_matrix=++o,e},u.prototype.relativeMatrix=function(){this._update();var t=Math.max(this._ts_transform,this._ts_translate,this._parent?this._parent._ts_transform:0);if(this._mo_rel==t)return this._relativeMatrix;this._mo_rel=t;var e,n,r=this._relativeMatrix;(r.identity(),this._pivoted&&r.translate(-this._pivotX*this._width,-this._pivotY*this._height),r.scale(this._scaleX,this._scaleY),r.skew(this._skewX,this._skewY),r.rotate(this._rotation),this._pivoted&&r.translate(this._pivotX*this._width,this._pivotY*this._height),this._pivoted)?(this._boxX=0,this._boxY=0,this._boxWidth=this._width,this._boxHeight=this._height):(r.a>0&&r.c>0||r.a<0&&r.c<0?(e=0,n=r.a*this._width+r.c*this._height):(e=r.a*this._width,n=r.c*this._height),e>n?(this._boxX=n,this._boxWidth=e-n):(this._boxX=e,this._boxWidth=n-e),r.b>0&&r.d>0||r.b<0&&r.d<0?(e=0,n=r.b*this._width+r.d*this._height):(e=r.b*this._width,n=r.d*this._height),e>n?(this._boxY=n,this._boxHeight=e-n):(this._boxY=e,this._boxHeight=n-e));return this._x=this._offsetX,this._y=this._offsetY,this._x-=this._boxX+this._handleX*this._boxWidth,this._y-=this._boxY+this._handleY*this._boxHeight,this._aligned&&this._parent&&(this._parent.relativeMatrix(),this._x+=this._alignX*this._parent._width,this._y+=this._alignY*this._parent._height),r.translate(this._x,this._y),this._relativeMatrix},u.prototype.get=function(t){if("function"==typeof s[t])return s[t](this)},u.prototype.set=function(t,e){if("string"==typeof t)"function"==typeof c[t]&&void 0!==e&&c[t](this,e);else if("object"==typeof t)for(e in t)"function"==typeof c[e]&&void 0!==t[e]&&c[e](this,t[e],t);return this._owner&&(this._owner._ts_pin=++o,this._owner.touch()),this};var s={alpha:function(t){return t._alpha},textureAlpha:function(t){return t._textureAlpha},width:function(t){return t._width},height:function(t){return t._height},boxWidth:function(t){return t._boxWidth},boxHeight:function(t){return t._boxHeight},scaleX:function(t){return t._scaleX},scaleY:function(t){return t._scaleY},skewX:function(t){return t._skewX},skewY:function(t){return t._skewY},rotation:function(t){return t._rotation},pivotX:function(t){return t._pivotX},pivotY:function(t){return t._pivotY},offsetX:function(t){return t._offsetX},offsetY:function(t){return t._offsetY},alignX:function(t){return t._alignX},alignY:function(t){return t._alignY},handleX:function(t){return t._handleX},handleY:function(t){return t._handleY}},c={alpha:function(t,e){t._alpha=e},textureAlpha:function(t,e){t._textureAlpha=e},width:function(t,e){t._width_=e,t._width=e,t._ts_transform=++o},height:function(t,e){t._height_=e,t._height=e,t._ts_transform=++o},scale:function(t,e){t._scaleX=e,t._scaleY=e,t._ts_transform=++o},scaleX:function(t,e){t._scaleX=e,t._ts_transform=++o},scaleY:function(t,e){t._scaleY=e,t._ts_transform=++o},skew:function(t,e){t._skewX=e,t._skewY=e,t._ts_transform=++o},skewX:function(t,e){t._skewX=e,t._ts_transform=++o},skewY:function(t,e){t._skewY=e,t._ts_transform=++o},rotation:function(t,e){t._rotation=e,t._ts_transform=++o},pivot:function(t,e){t._pivotX=e,t._pivotY=e,t._pivoted=!0,t._ts_transform=++o},pivotX:function(t,e){t._pivotX=e,t._pivoted=!0,t._ts_transform=++o},pivotY:function(t,e){t._pivotY=e,t._pivoted=!0,t._ts_transform=++o},offset:function(t,e){t._offsetX=e,t._offsetY=e,t._ts_translate=++o},offsetX:function(t,e){t._offsetX=e,t._ts_translate=++o},offsetY:function(t,e){t._offsetY=e,t._ts_translate=++o},align:function(t,e){this.alignX(t,e),this.alignY(t,e)},alignX:function(t,e){t._alignX=e,t._aligned=!0,t._ts_translate=++o,this.handleX(t,e)},alignY:function(t,e){t._alignY=e,t._aligned=!0,t._ts_translate=++o,this.handleY(t,e)},handle:function(t,e){this.handleX(t,e),this.handleY(t,e)},handleX:function(t,e){t._handleX=e,t._handled=!0,t._ts_translate=++o},handleY:function(t,e){t._handleY=e,t._handled=!0,t._ts_translate=++o},resizeMode:function(t,e,n){n&&("in"==e?e="in-pad":"out"==e&&(e="out-crop"),a(t,n.resizeWidth,n.resizeHeight,e))},resizeWidth:function(t,e,n){n&&n.resizeMode||a(t,e,null)},resizeHeight:function(t,e,n){n&&n.resizeMode||a(t,null,e)},scaleMode:function(t,e,n){n&&a(t,n.scaleWidth,n.scaleHeight,e)},scaleWidth:function(t,e,n){n&&n.scaleMode||a(t,e,null)},scaleHeight:function(t,e,n){n&&n.scaleMode||a(t,null,e)},matrix:function(t,e){this.scaleX(t,e.a),this.skewX(t,e.c/e.d),this.skewY(t,e.b/e.a),this.scaleY(t,e.d),this.offsetX(t,e.e),this.offsetY(t,e.f),this.rotation(t,0)}};function a(t,e,n,r){var i="number"==typeof e,u="number"==typeof n,s="string"==typeof r;t._ts_transform=++o,i&&(t._scaleX=e/t._width_,t._width=t._width_),u&&(t._scaleY=n/t._height_,t._height=t._height_),i&&u&&s&&("out"==r||"out-crop"==r?t._scaleX=t._scaleY=Math.max(t._scaleX,t._scaleY):"in"!=r&&"in-pad"!=r||(t._scaleX=t._scaleY=Math.min(t._scaleX,t._scaleY)),"out-crop"!=r&&"in-pad"!=r||(t._width=e/t._scaleX,t._height=n/t._scaleY))}r.prototype.scaleTo=function(t,e,n){return"object"==typeof t&&(n=e,e=t.y,t=t.x),a(this._pin,t,e,n),this},u._add_shortcuts=function(t){t.prototype.size=function(t,e){return this.pin("width",t),this.pin("height",e),this},t.prototype.width=function(t){return void 0===t?this.pin("width"):(this.pin("width",t),this)},t.prototype.height=function(t){return void 0===t?this.pin("height"):(this.pin("height",t),this)},t.prototype.offset=function(t,e){return"object"==typeof t&&(e=t.y,t=t.x),this.pin("offsetX",t),this.pin("offsetY",e),this},t.prototype.rotate=function(t){return this.pin("rotation",t),this},t.prototype.skew=function(t,e){return"object"==typeof t?(e=t.y,t=t.x):void 0===e&&(e=t),this.pin("skewX",t),this.pin("skewY",e),this},t.prototype.scale=function(t,e){return"object"==typeof t?(e=t.y,t=t.x):void 0===e&&(e=t),this.pin("scaleX",t),this.pin("scaleY",e),this},t.prototype.alpha=function(t,e){return this.pin("alpha",t),void 0!==e&&this.pin("textureAlpha",e),this}},u._add_shortcuts(r),t.exports=u},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return o}));var r="undefined"!=typeof performance?function(){return performance.now()}:function(){return Number(t.hrtime.bigint()/BigInt(1e6))},i=r();function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return r()-(i+t)}}).call(this,n(58))},function(t,e,n){var r=n(3);n(9);var i=n(14);r.prototype._textures=null,r.prototype._alpha=1,r.prototype.render=function(t){if(this._visible){i.node++;var e=this.matrix();t.setTransform(e.a,e.b,e.c,e.d,e.e,e.f),this._alpha=this._pin._alpha*(this._parent?this._parent._alpha:1);var n=this._pin._textureAlpha*this._alpha;if(t.globalAlpha!=n&&(t.globalAlpha=n),null!==this._textures)for(var r=0,o=this._textures.length;r<o;r++)this._textures[r].draw(t);t.globalAlpha!=this._alpha&&(t.globalAlpha=this._alpha);for(var u,s=this._first;u=s;)s=u._next,u.render(t)}},r.prototype._tickBefore=null,r.prototype._tickAfter=null,r.prototype.MAX_ELAPSE=1/0,r.prototype._tick=function(t,e,n){if(this._visible){t>this.MAX_ELAPSE&&(t=this.MAX_ELAPSE);var r=!1;if(null!==this._tickBefore)for(var o=0;o<this._tickBefore.length;o++){i.tick++,r=!0===this._tickBefore[o].call(this,t,e,n)||r}for(var u,s=this._first;u=s;)s=u._next,u._flag("_tick")&&(r=!0===u._tick(t,e,n)||r);if(null!==this._tickAfter)for(o=0;o<this._tickAfter.length;o++){i.tick++,r=!0===this._tickAfter[o].call(this,t,e,n)||r}return r}},r.prototype.tick=function(t,e){"function"==typeof t&&(e?(null===this._tickBefore&&(this._tickBefore=[]),this._tickBefore.push(t)):(null===this._tickAfter&&(this._tickAfter=[]),this._tickAfter.push(t)),this._flag("_tick",null!==this._tickAfter&&this._tickAfter.length>0||null!==this._tickBefore&&this._tickBefore.length>0))},r.prototype.untick=function(t){var e;"function"==typeof t&&(null!==this._tickBefore&&(e=this._tickBefore.indexOf(t))>=0&&this._tickBefore.splice(e,1),null!==this._tickAfter&&(e=this._tickAfter.indexOf(t))>=0&&this._tickAfter.splice(e,1))},r.prototype.timeout=function(t,e){this.setTimeout(t,e)},r.prototype.setTimeout=function(t,e){function n(r){if(!((e-=r)<0))return!0;this.untick(n),t.call(this)}return this.tick(n),n},r.prototype.clearTimeout=function(t){this.untick(t)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n(1),i=n(2),o=n(0);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p(t);if(e){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(y,t);var e,n,u,l=h(y);function y(t,e,n,r,i){var u,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return s(this,y),(u=l.call(this,t,e,n,r,i)).velocityX=c,u.velocityY=a,u.spin=f,u.leave=new o.a,u}return e=y,(n=[{key:"getRightEdge",value:function(t){return t.width()/2+this.radius}},{key:"getBottomEdge",value:function(t){return t.height()/2+this.radius}},{key:"moveBy",value:function(t,e,n){var i=n*r.a.dtCoefficient,o=t?t*i:0,u=e?e*i:0;0===o&&0===u||this.moveTo(this.offsetX+o,this.offsetY+u)}},{key:"rotateBy",value:function(t,e){var n=e*r.a.dtCoefficient,i=t?t*n:0;0!==i&&this.rotateTo(this.rotation+i)}},{key:"accelerate",value:function(t,e,n,o){var u=o*r.a.dtCoefficient;if(this.velocityX+=i.c(t,e*u),this.velocityY+=i.d(t,e*u),n){var s=i.b(this.velocityX,this.velocityY);if(s>=n){var c=n/s;this.velocityX*=c,this.velocityY*=c}}}},{key:"ricochet",value:function(t,e,n){var o=1/r.a.dtCoefficient,u=Math.PI+i.a(this.offsetX,this.offsetY,t.offsetX,t.offsetY);this.accelerate(u,e,n,o)}},{key:"tick",value:function(t,e){a(p(y.prototype),"tick",this).call(this,t,e),this.rotateBy(this.spin,t),this.moveBy(this.velocityX,this.velocityY,t);var n=this.getRightEdge(e),r=this.getBottomEdge(e);this.offsetX>=n?this.leave.emit("right"):this.offsetX<=-n&&this.leave.emit("left"),this.offsetY>=r?this.leave.emit("bottom"):this.offsetY<=-r&&this.leave.emit("top")}}])&&c(e.prototype,n),u&&c(e,u),y}(n(5).a)},function(t,e,n){"use strict";(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h(t);if(e){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}function f(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",(function(){return l}));var l=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(p,e);var n,r,f,l=a(p);function p(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.font,u=void 0===r?"sansserif":r,s=n.value,c=i(n,["font","value"]);return o(this,p),(e=l.call(this,t.string(u).spacing(1))).value=s,e.pin=c,e}return n=p,(r=[{key:"append",value:function(t){t.append(this.node)}},{key:"start",value:function(t){s(h(p.prototype),"start",this).call(this,t),this.node.pin(this.pin),delete this.pin}},{key:"value",get:function(){return this.node.value()},set:function(t){this.node.value(t)}}])&&u(n.prototype,r),f&&u(n,f),p}(n(5).a)}).call(this,n(7))},function(t,e){t.exports={}},function(t,e){t.exports=function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t}},function(t,e){
/**
 * ! is the definitive JavaScript type testing library
 * 
 * @copyright 2013-2014 Enrico Marino / Jordan Harband
 * @license MIT
 */
var n=Object.prototype,r=n.hasOwnProperty,i=n.toString,o=/^[A-Fa-f0-9]+$/,u=t.exports={};u.a=u.an=u.type=function(t,e){return typeof t===e},u.defined=function(t){return void 0!==t},u.empty=function(t){var e,n=i.call(t);if("[object Array]"===n||"[object Arguments]"===n||"[object String]"===n)return 0===t.length;if("[object Object]"===n){for(e in t)if(r.call(t,e))return!1;return!0}return!t},u.equal=function(t,e){if(t===e)return!0;var n,r=i.call(t);if(r!==i.call(e))return!1;if("[object Object]"===r){for(n in t)if(!u.equal(t[n],e[n])||!(n in e))return!1;for(n in e)if(!u.equal(t[n],e[n])||!(n in t))return!1;return!0}if("[object Array]"===r){if((n=t.length)!==e.length)return!1;for(;--n;)if(!u.equal(t[n],e[n]))return!1;return!0}return"[object Function]"===r?t.prototype===e.prototype:"[object Date]"===r&&t.getTime()===e.getTime()},u.instance=function(t,e){return t instanceof e},u.nil=function(t){return null===t},u.undef=function(t){return void 0===t},u.array=function(t){return"[object Array]"===i.call(t)},u.emptyarray=function(t){return u.array(t)&&0===t.length},u.arraylike=function(t){return!!t&&!u.boolean(t)&&r.call(t,"length")&&isFinite(t.length)&&u.number(t.length)&&t.length>=0},u.boolean=function(t){return"[object Boolean]"===i.call(t)},u.element=function(t){return void 0!==t&&"undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&1===t.nodeType},u.fn=function(t){return"[object Function]"===i.call(t)},u.number=function(t){return"[object Number]"===i.call(t)},u.nan=function(t){return!u.number(t)||t!=t},u.object=function(t){return"[object Object]"===i.call(t)},u.hash=function(t){return u.object(t)&&t.constructor===Object&&!t.nodeType&&!t.setInterval},u.regexp=function(t){return"[object RegExp]"===i.call(t)},u.string=function(t){return"[object String]"===i.call(t)},u.hex=function(t){return u.string(t)&&(!t.length||o.test(t))}},function(t,e,n){"use strict";n.d(e,"b",(function(){return v})),n.d(e,"a",(function(){return d}));var r=n(0),i=(n(4),n(13)),o=n(33),u=n(34);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p(t);if(e){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function v(t){var e=t.type,n=y(t,["type"]);if("bullets"===e)return new o.a(n);if("lasers"===e)return new u.a(n);throw new KeyError(e)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(u,t);var e,n,i,o=h(u);function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=o.call(this,{alignX:.1,alignY:.92})).shooter=t,e.value="bullets",e.arm=new r.a,e.fire=new r.a,e}return e=u,(n=[{key:"start",value:function(t){var e=this;a(p(u.prototype),"start",this).call(this,t),this.arm.on((function(t){return e.changeAmmo(t)}))}},{key:"changeAmmo",value:function(t){var e=t.type;this.value=e}},{key:"shoot",value:function(t){var e=this.shooter;this.fire.emit({type:this.value,offsetX:e.offsetX,offsetY:e.offsetY,rotation:e.rotation,velocityX:e.velocityX,velocityY:e.velocityY})}}])&&c(e.prototype,n),i&&c(e,i),u}(i.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));n(1);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=a(t);if(e){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(f,t);var e,n,r,c=s(f);function f(t,e,n,r,i,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),c.call(this,t,e,n,r,void 0,i,o)}return e=f,(n=[{key:"start",value:function(t){var e=this;o(a(f.prototype),"start",this).call(this,t),this.leave.on((function(t){return e.onLeave(t)}))}},{key:"tick",value:function(t,e){o(a(f.prototype),"tick",this).call(this,t,e),performance.now()>=this.expires&&this.remove.emit()}},{key:"onLeave",value:function(t){"top"===t||"bottom"===t?this.moveTo(this.offsetX,-this.offsetY):"left"!==t&&"right"!==t||this.moveTo(-this.offsetX,this.offsetY)}}])&&i(e.prototype,n),r&&i(e,r),f}(n(12).a)},function(t,e,n){var r=n(14),i=n(20);function o(t,e){"object"==typeof t&&this.src(t,e)}o.prototype.pipe=function(){return new o(this)},o.prototype.src=function(t,e,n,r){if("object"==typeof t){var i=t,o=e||1;this._image=i,this._sx=this._dx=0,this._sy=this._dy=0,this._sw=this._dw=i.width/o,this._sh=this._dh=i.height/o,this.width=i.width/o,this.height=i.height/o,this.ratio=o}else void 0===n?(n=t,r=e):(this._sx=t,this._sy=e),this._sw=this._dw=n,this._sh=this._dh=r,this.width=n,this.height=r;return this},o.prototype.dest=function(t,e,n,r){return this._dx=t,this._dy=e,this._dx=t,this._dy=e,void 0!==n&&(this._dw=n,this._dh=r,this.width=n,this.height=r),this},o.prototype.draw=function(t,e,n,o,u,s,c,a,f){var h=this._image;if(null!==h&&"object"==typeof h){var l=this._sx,p=this._sy,y=this._sw,v=this._sh,d=this._dx,_=this._dy,b=this._dw,m=this._dh;void 0!==s?(e=i.limit(e,0,this._sw),o=i.limit(o,0,this._sw-e),l+=e,p+=n=i.limit(n,0,this._sh),y=o,v=u=i.limit(u,0,this._sh-n),d=s,_=c,b=a,m=f):void 0!==o?(d=e,_=n,b=o,m=u):void 0!==e&&(b=e,m=n);var g=this.ratio||1;l*=g,p*=g,y*=g,v*=g;try{"function"==typeof h.draw?h.draw(t,l,p,y,v,d,_,b,m):(r.draw++,t.drawImage(h,l,p,y,v,d,_,b,m))}catch(t){h._draw_failed||(console.log("Unable to draw: ",h),console.log(t),h._draw_failed=!0)}}},t.exports=o},function(t,e,n){var r=n(8),i=Math;t.exports=r(Math),t.exports.random=function(t,e){return void 0===t?(e=1,t=0):void 0===e&&(e=t,t=0),t==e?t:i.random()*(e-t)+t},t.exports.rotate=function(t,e,n){return void 0===e?(n=1,e=0):void 0===n&&(n=e,e=0),n>e?(t=(t-e)%(n-e))+(t<0?n:e):(t=(t-n)%(e-n))+(t<=0?e:n)},t.exports.limit=function(t,e,n){return t<e?e:t>n?n:t},t.exports.length=function(t,e){return i.sqrt(t*t+e*e)}},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return w}));var r=n(1),i=n(0),o=n(2),u=(n(4),n(35)),s=n(17),c=n(12),a=n(5);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}function y(t,e,n){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=g(t);if(e){var i=g(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b(this,n)}}function b(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?m(t):e}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var w=function(e){v(c,e);var n=_(c);function c(e){var r;return function(t){if(null==t)throw new TypeError("Cannot destructure undefined")}(e),h(this,c),(r=n.call(this,t.image("shuttle"))).fire=new i.a,r.input=new i.a,r.cannon=new s.a(m(r)),r.actions=new u.a(["fire","focus","turnLeft","turnRight","accelerate"]),r}return p(c,[{key:"start",value:function(t){var e=this;y(g(c.prototype),"start",this).call(this,t),this.leave.on((function(t){return e.onLeave(t)})),this.input.trigger(this.actions).trigger(this.sync,"input"),this.broker.topic("input").trigger(this.actions),this.actions.fire.on((function(){return e.cannon.shoot(t,e)})),this.cannon.start(t),this.actions.turnLeft.on((function(){return e.turnLeft()})),this.actions.turnLeft.clear.on((function(){return e.turnRight()})),this.actions.turnRight.on((function(){return e.turnRight()})),this.actions.turnRight.clear.on((function(){return e.turnLeft()})),this.remove.on((function(){return e.explode(t)}))}},{key:"tick",value:function(t,e){if(y(g(c.prototype),"tick",this).call(this,t,e),this.actions.focus.active&&0===this.spin){var n=this.getFocusAngle(this.actions.focus.value),i=o.e(this.rotation,n);this.rotateBy(i*r.a.shuttleRotation,t)}this.actions.accelerate.active&&this.accelerate(this.rotation,r.a.shuttleAcceleration,r.a.shuttleMaxVelocity,t)}},{key:"explode",value:function(t){new x(this.offsetX,this.offsetY).start(t)}},{key:"turnLeft",value:function(){this.spin-=r.a.shuttleRotation}},{key:"turnRight",value:function(){this.spin+=r.a.shuttleRotation}},{key:"getFocusAngle",value:function(t){return o.a(this.offsetX,this.offsetY,t.x,t.y)}},{key:"save",value:function(t,e){y(g(c.prototype),"save",this).call(this,t,e),e.offsetX=this.offsetX,e.offsetY=this.offsetY,e.rotation=this.rotation,e.velocityX=this.velocityX,e.velocityY=this.velocityY}},{key:"load",value:function(t,e){y(g(c.prototype),"load",this).call(this,t,e),this.moveTo(e.offsetX,e.offsetY),this.rotateTo(e.rotation),this.velocityX=e.velocityX,this.velocityY=e.velocityY}},{key:"onLeave",value:function(t){"top"===t||"bottom"===t?this.moveTo(this.offsetX,-this.offsetY):"left"!==t&&"right"!==t||this.moveTo(-this.offsetX,this.offsetY)}}]),c}(c.a),x=function(e){v(r,e);var n=_(r);function r(e,i){h(this,r);var o=t.anim("explosion");return n.call(this,o,e,i)}return p(r,[{key:"start",value:function(t){var e=this;y(g(r.prototype),"start",this).call(this,t),this.node.repeat(1,(function(){return e.remove.emit()}))}}]),r}(a.a)}).call(this,n(7))},function(t,e){function n(t,e,n,r,i,o){this.reset(t,e,n,r,i,o)}n.prototype.toString=function(){return"["+this.a+", "+this.b+", "+this.c+", "+this.d+", "+this.e+", "+this.f+"]"},n.prototype.clone=function(){return new n(this.a,this.b,this.c,this.d,this.e,this.f)},n.prototype.reset=function(t,e,n,r,i,o){return this._dirty=!0,"object"==typeof t?(this.a=t.a,this.d=t.d,this.b=t.b,this.c=t.c,this.e=t.e,this.f=t.f):(this.a=t||1,this.d=r||1,this.b=e||0,this.c=n||0,this.e=i||0,this.f=o||0),this},n.prototype.identity=function(){return this._dirty=!0,this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this},n.prototype.rotate=function(t){if(!t)return this;this._dirty=!0;var e=t?Math.cos(t):1,n=t?Math.sin(t):0,r=e*this.a-n*this.b,i=e*this.b+n*this.a,o=e*this.c-n*this.d,u=e*this.d+n*this.c,s=e*this.e-n*this.f,c=e*this.f+n*this.e;return this.a=r,this.b=i,this.c=o,this.d=u,this.e=s,this.f=c,this},n.prototype.translate=function(t,e){return t||e?(this._dirty=!0,this.e+=t,this.f+=e,this):this},n.prototype.scale=function(t,e){return t-1||e-1?(this._dirty=!0,this.a*=t,this.b*=e,this.c*=t,this.d*=e,this.e*=t,this.f*=e,this):this},n.prototype.skew=function(t,e){if(!t&&!e)return this;this._dirty=!0;var n=this.a+this.b*t,r=this.b+this.a*e,i=this.c+this.d*t,o=this.d+this.c*e,u=this.e+this.f*t,s=this.f+this.e*e;return this.a=n,this.b=r,this.c=i,this.d=o,this.e=u,this.f=s,this},n.prototype.concat=function(t){this._dirty=!0;var e=this,n=e.a*t.a+e.b*t.c,r=e.b*t.d+e.a*t.b,i=e.c*t.a+e.d*t.c,o=e.d*t.d+e.c*t.b,u=e.e*t.a+t.e+e.f*t.c,s=e.f*t.d+t.f+e.e*t.b;return this.a=n,this.b=r,this.c=i,this.d=o,this.e=u,this.f=s,this},n.prototype.inverse=n.prototype.reverse=function(){if(this._dirty){this._dirty=!1,this.inversed=this.inversed||new n;var t=this.a*this.d-this.b*this.c;this.inversed.a=this.d/t,this.inversed.b=-this.b/t,this.inversed.c=-this.c/t,this.inversed.d=this.a/t,this.inversed.e=(this.c*this.f-this.e*this.d)/t,this.inversed.f=(this.e*this.b-this.a*this.f)/t}return this.inversed},n.prototype.map=function(t,e){return(e=e||{}).x=this.a*t.x+this.c*t.y+this.e,e.y=this.b*t.x+this.d*t.y+this.f,e},n.prototype.mapX=function(t,e){return"object"==typeof t&&(e=t.y,t=t.x),this.a*t+this.c*e+this.e},n.prototype.mapY=function(t,e){return"object"==typeof t&&(e=t.y,t=t.x),this.b*t+this.d*e+this.f},t.exports=n},function(t,e,n){"use strict";(function(t){var r=n(24),i=n(25),o=n(26),u=n(27),s=n(28),c=n(29),a=n(30);function f(t,e,n,r,i){for(var o=0,u=[],s=0;s<t*i;s+=i)for(var c=0;c<e*r;c+=r)o++<n&&u.push({x:c,y:s,width:r,height:i});return u}function h(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#ddd",i=new Map;return function(o){o+="",i.has(o)||i.set(o,l(o,e));var u=i.get(o);return t.canvas((function(t){this.size(u,n),t.font=e,t.fillStyle=r,t.textBaseline="top",t.fillText(o,0,0)}))}}function l(t,e){var n=document.createElement("canvas").getContext("2d");return n.font=e,n.measureText(t).width}e.a=[{textures:{monospace:h("bold 24px monospace",24),sansserif:h("bold 24px sans-serif",24),star:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#fff",r=2*e,i=2*e,o=1;return t.canvas((function(t){this.size(r,i,o),t.scale(o,o),t.arc(r/2,i/2,e,0,2*Math.PI),t.fillStyle=n,t.fill()}))}(5)}},{image:r.a,textures:{shuttle:{x:0,y:0,width:52,height:52}}},{image:i.a,textures:{bullet:{x:0,y:0,width:15,height:30}}},{image:o.a,textures:{laser:{x:0,y:0,width:21,height:32}}},{image:u.a,textures:{rock:{x:0,y:0,width:64,height:64}}},{image:s.a,textures:{explosion:f(3,5,12,52,52)}},{image:c.a,textures:{crystal:f(36,5,180,50,90)}},{image:a.a,textures:{powerup:f(6,5,30,60,60)}}]}).call(this,n(7))},function(t,e,n){"use strict";e.a=n.p+"8ce71c1e3ef2fbaef4fa3370ca542da2.png"},function(t,e,n){"use strict";e.a=n.p+"8f3d31fe8e8b79ff83e39b0a044df97d.png"},function(t,e,n){"use strict";e.a=n.p+"8976d8ea1b2932f877ab38f4e7b1d9d1.png"},function(t,e,n){"use strict";e.a=n.p+"b4a6029c0742bc5a3c361f43adc65118.png"},function(t,e,n){"use strict";e.a=n.p+"50cf1f6241ccd1ef539287eabff77433.png"},function(t,e,n){"use strict";e.a=n.p+"fddfb2abe8967582fb4ed6bb3694dec9.png"},function(t,e,n){"use strict";e.a=n.p+"8be16eb32bf321c8362a17cce1eadb63.png"},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return p}));var r=n(1),i=n(6),o=n(0);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function h(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(y,e);var n,u,h,p=f(y);function y(e){var n,u=e.side,s=e.offsetX,c=e.offsetY,a=e.scale,f=e.velocityX,h=e.velocityY;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);var l=Object(i.b)(0,2*Math.PI),v=Object(i.b)(-r.a.rockSpinSpeed,r.a.rockSpinSpeed),d=t.image("rock");return(n=p.call(this,d,s,c,l,a,f,h,v)).side=u,n.shoot=new o.a,n}return n=y,(u=[{key:"start",value:function(t){var e=this;c(l(y.prototype),"start",this).call(this,t),this.leave.on((function(t){return e.onLeave(t)})),this.shoot.on((function(t){return e.ricochet(t,r.a.rockRicochet,0)})).trigger(this.sync,null)}},{key:"onLeave",value:function(t){t!==this.side&&this.remove.emit()}},{key:"save",value:function(t,e){c(l(y.prototype),"save",this).call(this,t,e),e.offsetX=this.offsetX,e.offsetY=this.offsetY,e.velocityX=this.velocityX,e.velocityY=this.velocityY}},{key:"load",value:function(t,e,n){c(l(y.prototype),"load",this).call(this,t,e,n);var r=n-e.mod;this.moveTo(e.offsetX,e.offsetY),this.velocityX=e.velocityX,this.velocityY=e.velocityY,this.tick(r,t)}}])&&s(n.prototype,u),h&&s(n,h),y}(n(12).a)}).call(this,n(7))},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return h}));var r=n(4);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f(t);if(e){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(l,e);var n,i,a,h=c(l);function l(e){var n=e.offsetX,r=e.offsetY;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var i=t.anim("crystal");return h.call(this,i,n,r)}return n=l,(i=[{key:"start",value:function(t){var e=this;u(f(l.prototype),"start",this).call(this,t),r.a.crystalSpawn.emit(),this.node.repeat(10,(function(){return e.remove.emit()})).fps(60)}}])&&o(n.prototype,i),a&&o(n,a),l}(n(5).a)}).call(this,n(7))},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return p}));var r=n(1),i=n(2),o=n(4);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function h(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(y,e);var n,u,h,p=f(y);function y(e){var n,o=e.offsetX,u=e.offsetY,s=e.rotation,c=e.velocityX,a=e.velocityY;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);var f=c+i.c(s,r.a.bulletVelocity),h=a+i.d(s,r.a.bulletVelocity),l=t.image("bullet");return(n=p.call(this,l,o,u,s,f,h)).expires=performance.now()+r.a.bulletDecay,n}return n=y,(u=[{key:"start",value:function(t){c(l(y.prototype),"start",this).call(this,t),o.a.shootBullet.emit()}}])&&s(n.prototype,u),h&&s(n,h),y}(n(18).a)}).call(this,n(7))},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return p}));n(0);var r=n(1),i=n(2),o=n(4);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function h(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(y,e);var n,u,h,p=f(y);function y(e){var n,o=e.offsetX,u=e.offsetY,s=e.rotation,c=e.velocityX,a=e.velocityY;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);var f=c+i.c(s,3*r.a.bulletVelocity),h=a+i.d(s,3*r.a.bulletVelocity),l=t.image("laser");return(n=p.call(this,l,o,u,s,f,h)).expires=performance.now()+r.a.laserDecay,n}return n=y,(u=[{key:"start",value:function(t){c(l(y.prototype),"start",this).call(this,t),o.a.shootLaser.emit()}}])&&s(n.prototype,u),h&&s(n,h),y}(n(18).a)}).call(this,n(7))},function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n(0);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,o=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw o}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p(t);if(e){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(t){a(n,t);var e=h(n);function n(t){var r;c(this,n),r=e.call(this);var i,o=u(t);try{for(o.s();!(i=o.n()).done;){var s=i.value;r[s]=new v}}catch(t){o.e(t)}finally{o.f()}return r.on((function(t,e,n){var i=r[t];i instanceof v&&(i.value=e,i.when=n,null===e?i.clear.emit(n):i.emit(e,n))})),r}return n}(r.a),v=function(t){a(s,t);var e,n,i,u=h(s);function s(){var t;return c(this,s),(t=u.call(this)).value=null,t.when=null,t.clear=new r.a,t}return e=s,(n=[{key:"active",get:function(){return null!==this.value}}])&&o(e.prototype,n),i&&o(e,i),s}(r.a)},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return f}));n(4);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=a(t);if(e){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(h,e);var n,r,c,f=s(h);function h(e){var n,r=e.offsetX,i=e.offsetY,o=e.type;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);var u=t.anim("powerup");return(n=f.call(this,u,r,i)).type=o,n}return n=h,(r=[{key:"start",value:function(t){var e=this;o(a(h.prototype),"start",this).call(this,t),this.node.repeat(10,(function(){return e.remove.emit()})).fps(40)}}])&&i(n.prototype,r),c&&i(n,c),h}(n(5).a)}).call(this,n(7))},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return d}));var r=n(1),i=n(5),o=(n(0),n(6));function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=y(t);if(e){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function p(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(r,e);var n=l(r);function r(e){var i,o=e.offsetX,u=e.offsetY,c=e.scale;s(this,r);var a=t.image("star");return(i=n.call(this,a,o,u,0,c)).smallScale=.6*c,i}return a(r,[{key:"start",value:function(t){f(y(r.prototype),"start",this).call(this,t),this.shrink()}},{key:"shrink",value:function(){var t=this;this.node.tween(500).scale(this.smallScale).done((function(){return t.grow()}))}},{key:"grow",value:function(){var t=this;this.node.tween(1e3).delay(Object(o.b)(0,1e3)).scale(this.scale).done((function(){return t.shrink()}))}}]),r}(i.a),d=function(){function t(){s(this,t)}return a(t,[{key:"start",value:function(t){for(var e=t.width(),n=t.height(),i=0;i<r.a.starfieldSize;i++){var u=Object(o.b)(-e/2,e/2),s=Object(o.b)(-n/2,n/2),c=Object(o.b)(.5,1);new v({offsetX:u,offsetY:s,scale:c}).start(t)}}}]),t}()}).call(this,n(7))},function(t,e,n){"use strict";n.d(e,"a",(function(){return Tt}));var r=n(1),i=n(0),o=n(4);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){s=!0,o=t},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=v(t);if(e){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y(this,n)}}function y(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(){return performance.now()}var _=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(n,t);var e=p(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.a.keyBindings,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.a.mouseBindings;return a(this,n),(t=e.call(this)).keyBindings=i,t.mouseBindings=o,t.valueCache={},t.timeouts={},t.firstTouchId=null,t.secondTouchId=null,t}return h(n,[{key:"start",value:function(t){var e=this;document.onkeydown=function(n){return e.onKeyDown(t,n)},document.onkeyup=function(n){return e.onKeyUp(t,n)},document.onmouseout=function(n){return e.onMouseOut(t,n)},document.oncontextmenu=function(t){return!1},t.on("mousemove",(function(n){return e.onMouseMove(t,n)})),t.on("touchmove",(function(n){return e.onTouchMove(t,n)})),t.on("mousedown",(function(n){return e.onMouseStart(t,n)})),t.on("touchstart",(function(n){return e.onTouchStart(t,n)})),t.on(["mouseup","mousecancel"],(function(n){return e.onMouseEnd(t,n)})),t.on(["touchend","touchcancel"],(function(n){return e.onTouchEnd(t,n)}))}},{key:"setAction",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d;if(e&&!n.equals(this.valueCache[e])){this.valueCache[e]=n;var o=r.a.actionIntervals[e];o?this.startInterval(t,e,o,i,n):this.emit(e,n,i())}}},{key:"startInterval",value:function(t,e,n,r,i){this.timeouts[e]||(this.emit(e,i,r()),this.delayNextPublish(t,e,n,r,i))}},{key:"delayNextPublish",value:function(t,e,n,r,i){var o=this;this.timeouts[e]=setTimeout((function(){o.timeouts[e]=void 0;var u=o.valueCache[e];u&&!u.equals(i)&&o.startInterval(t,e,n,r,u)}),n)}},{key:"clearAction",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;e&&this.valueCache[e]&&(this.valueCache[e]=null,this.emit(e,null,n()))}},{key:"onKeyDown",value:function(t,e){this.setAction(t,this.keyBindings[e.keyCode],new b)}},{key:"onKeyUp",value:function(t,e){this.clearAction(t,this.keyBindings[e.keyCode])}},{key:"onMouseMove",value:function(t,e){var n=e.x-t.width()/2,r=e.y-t.height()/2,i=new m(n,r);this.setAction(t,this.mouseBindings.move,i)}},{key:"onMouseOut",value:function(t,e){this.clearAction(t,this.mouseBindings.move)}},{key:"onMouseStart",value:function(t,e){var n=e.raw.button;0===n?this.setAction(t,this.mouseBindings.click,new b):1===n?this.setAction(t,this.mouseBindings.middleClick,new b):2===n&&this.setAction(t,this.mouseBindings.rightClick,new b)}},{key:"onMouseEnd",value:function(t,e){var n=e.raw.button;0===n?this.clearAction(t,this.mouseBindings.click):1===n?this.clearAction(t,this.mouseBindings.middleClick):2===n&&this.clearAction(t,this.mouseBindings.rightClick)}},{key:"onTouchMove",value:function(t,e){this.isTouchChanged(e,this.firstTouchId)&&this.onMouseMove(t,e)}},{key:"onTouchStart",value:function(t,e){var n=e.raw.changedTouches,r=0;null===this.firstTouchId&&(this.firstTouchId=n[r++].identifier,this.onTouchMove(t,e)),null===this.secondTouchId&&n[r]&&(this.secondTouchId=n[r++].identifier,this.setAction(t,this.mouseBindings.click,new b))}},{key:"onTouchEnd",value:function(t,e){this.isTouchChanged(e,this.firstTouchId)&&(this.firstTouchId=null,this.clearAction(t,this.mouseBindings.move)),this.isTouchChanged(e,this.secondTouchId)&&(this.secondTouchId=null,this.clearAction(t,this.mouseBindings.click))}},{key:"isTouchChanged",value:function(t,e){if(e){var n,r=s(t.raw.changedTouches);try{for(r.s();!(n=r.n()).done;){if(n.value.identifier===e)return!0}}catch(t){r.e(t)}finally{r.f()}}return!1}}]),n}(i.a),b=function(){function t(){a(this,t)}return h(t,[{key:"equals",value:function(e){return e instanceof t}}]),t}(),m=function(){function t(e,n){a(this,t),this.x=e,this.y=n}return h(t,[{key:"equals",value:function(t){return t&&this.x===t.x&&this.y===t.y}}]),t}(),g=n(10),w=n(6);function x(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return k(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){s=!0,o=t},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function O(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t,e,n){return e&&j(t.prototype,e),n&&j(t,n),t}var R=["rocks","crystals","powerups","projectiles","shuttles"],T=function(){function t(){O(this,t);var e,n=x(R);try{for(n.s();!(e=n.n()).done;){var r=e.value;this[r]=new P(this,r)}}catch(t){n.e(t)}finally{n.f()}}return S(t,[{key:"forEach",value:function(t){var e,n=x(R);try{for(n.s();!(e=n.n()).done;){var r=e.value;t(r,this[r])}}catch(t){n.e(t)}finally{n.f()}}},{key:"sync",value:function(t){var e=this;this.forEach((function(e,n){n.sync.until(t.close,(function(n,r,i,o,u){if(t!==u){var s=[{type:e,id:n,row:r,emit:o}];t.send.emit({when:i,changes:s})}}))})),t.recv.on((function(n){var r=n.when;n.changes.length>0&&n.changes.forEach((function(n){var i=n.type,o=n.id,u=n.row,s=n.emit;e[i].apply(o,u,r,s,t)}))})),t.close.on((function(){e.forEach((function(e,n){n.removeOwned(t)}))}));var n=[];this.forEach((function(t,e){e.rows.forEach((function(e,r){return n.push({type:t,id:r,row:e})}))})),t.send.emit({changes:n})}}]),t}(),P=function(){function t(e,n){O(this,t),this.doc=e,this.type=n,this.owned=new WeakMap,this.rows=new Map,this.sync=new i.a,this.added=(new i.a).trigger(this.sync),this.updated=(new i.a).trigger(this.sync),this.removed=(new i.a).trigger(this.sync)}return S(t,[{key:"setOwned",value:function(t,e){this.owned.has(t)||this.owned.set(t,new Set),this.owned.get(t).add(e)}},{key:"removeOwned",value:function(t){var e=this,n=this.owned.get(t);n&&n.forEach((function(t){return e.remove(t)}))}},{key:"apply",value:function(t,e,n,r,i){var o=this.rows.get(t);e?o?(Object.assign(o,e),this.updated.emit(t,o,n,r,i)):(this.rows.set(t,e),this.setOwned(i,t),this.added.emit(t,e,n,r,i)):o&&(this.rows.delete(t),this.removed.emit(t,e,n,r,i))}},{key:"add",value:function(t){var e=Object(w.a)(16),n=Object(g.a)();return t.mod=n,this.rows.set(e,t),this.added.emit(e,t,n),e}},{key:"update",value:function(t,e,n){var r=this.rows.get(t),i={},o=Object(g.a)();i.mod=o,e(function(t,e){return new Proxy(t,{set:function(t,n,r){return e[n]=t[n]=r,!0}})}(r,i)),this.updated.emit(t,i,o,n)}},{key:"remove",value:function(t){this.rows.delete(t)&&this.removed.emit(t,null,Object(g.a)())}}]),t}();function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var X=function t(e){var n=e.when,r=void 0===n?Object(g.a)():n,i=e.changes,o=void 0===i?[]:i;E(this,t),this.when=r,this.changes=o},Y=function t(){E(this,t),this.send=new i.a,this.recv=new i.a,this.close=new i.a,Object.freeze(this)},A=new URLSearchParams(window.location.search),M=A.get("game");M||(A.append("game",Object(w.a)(5)),window.location.search=A.toString());var C=M,D=n(31),I=n(32),B=n(17),L=n(21),q=n(36);function F(t){return function(t){if(Array.isArray(t))return W(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return W(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function U(t,e,n){return e&&H(t.prototype,e),n&&H(t,n),t}var N=function(){function t(e){z(this,t),this.url=e,this.doc=new T,this.rockSet=new V(this.doc.rocks,(function(t){return new D.a(t)})),this.crystalSet=new V(this.doc.crystals,(function(t){return new I.a(t)})),this.shuttleSet=new V(this.doc.shuttles,(function(t){return new L.a(t)})),this.powerupSet=new V(this.doc.powerups,(function(t){return new q.a(t)})),this.projectileSet=new V(this.doc.projectiles,(function(t){return Object(B.b)(t)}))}return U(t,[{key:"start",value:function(t){var e=this,n=new WebSocket("".concat(this.url,"?game=").concat(C)),r=new Y;r.send.on((function(t){return n.send(JSON.stringify(new X(t)))})),n.onmessage=function(t){return r.recv.emit(new X(JSON.parse(t.data)))},n.onclose=function(){return r.close.emit()},n.onopen=function(){return e.doc.sync(r)},this.rockSet.start(t),this.crystalSet.start(t),this.shuttleSet.start(t),this.powerupSet.start(t),this.projectileSet.start(t)}}]),t}(),V=function(){function t(e,n){z(this,t),this.table=e,this.newNode=n,this.map=new Map}return U(t,[{key:"values",value:function(){return this.map.values()}},{key:"add",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.table.add(t);return this.map.get(e)}},{key:"start",value:function(t){var e=this;this.table.added.on((function(n,r,i){var o=e.startNode(t,r,i);o.remove.on((function(){return e.table.remove(n)})),o.sync.until(o.remove,(function(r){for(var i=arguments.length,u=new Array(i>1?i-1:0),s=1;s<i;s++)u[s-1]=arguments[s];var c=r?{topic:r,args:u}:void 0;e.table.update(n,(function(e){return o.save(t,e)}),c)})),e.map.set(n,o)})),this.table.updated.on((function(n,r,i,o,u){if(u){var s,c=e.map.get(n);c.load(t,r,i),o&&(s=c.broker).emit.apply(s,[o.topic].concat(F(o.args)))}})),this.table.removed.on((function(t,n,r,i,o){if(o){var u=e.map.get(t);e.map.delete(t),u.remove.emit()}}))}},{key:"startNode",value:function(t,e,n){var r=this.newNode(e),i=n-e.mod;return r.start(t),r.tick(i,t),r}}]),t}();n(2);function $(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return K(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){s=!0,o=t},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function J(t){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Z(t,e,n){return e&&Q(t.prototype,e),n&&Q(t,n),t}function tt(t,e){return(tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=rt(t);if(e){var i=rt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return nt(this,n)}}function nt(t,e){return!e||"object"!==J(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rt(t){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var it=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tt(t,e)}(n,t);var e=et(n);function n(t,r){var i;return G(this,n),(i=e.call(this)).leftSet=t,i.rightSet=r,i}return Z(n,[{key:"triggerLeft",value:function(t){return this.on((function(e,n){return t(e).emit(n)}))}},{key:"triggerRight",value:function(t){return this.on((function(e,n){return t(n).emit(e)}))}}]),n}(i.a),ot=function(){function t(){G(this,t),this.groups=[]}return Z(t,[{key:"detect",value:function(t,e){var n=new it(t,e);return this.groups.push(n),n}},{key:"start",value:function(t){var e=this;t.tick((function(n){return e.tick(n,t)}))}},{key:"tick",value:function(t,e){var n,r=$(this.groups);try{for(r.s();!(n=r.n()).done;){var i,o=n.value,u=$(o.leftSet.values());try{for(u.s();!(i=u.n()).done;){var s,c=i.value,a=$(o.rightSet.values());try{for(a.s();!(s=a.n()).done;){var f=s.value;c!==f&&c.touching(f)&&o.emit(c,f)}}catch(t){a.e(t)}finally{a.f()}}}catch(t){u.e(t)}finally{u.f()}}}catch(t){r.e(t)}finally{r.f()}}}]),t}(),ut=n(13);function st(t){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ct(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(r=(u=s.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return at(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return at(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ht(t,e,n){return(ht="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vt(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function lt(t,e){return(lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=vt(t);if(e){var i=vt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return yt(this,n)}}function yt(t,e){return!e||"object"!==st(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vt(t){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lt(t,e)}(u,t);var e,n,r,o=pt(u);function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=o.call(this,{alignY:.92})).timeLimit=t,e.expire=new i.a,e.extendTimer=new i.a,e.showTotalTime=new i.a,e}return e=u,(n=[{key:"start",value:function(t){var e=this;ht(vt(u.prototype),"start",this).call(this,t),this.setCountDownTimer(60*this.timeLimit),this.startCountDownTimer(t),this.extendTimer.on((function(){return e.addTime()}));var n=performance.now();this.showTotalTime.on((function(){return e.getTotalTime(n)}))}},{key:"getTotalTime",value:function(t){var e=(performance.now()-t)/1e3,n=Math.floor(e/60),r=Math.trunc(e%60),i="".concat(r).padStart(2,"0");this.displayTotalTime(n,i)}},{key:"displayTotalTime",value:function(t,e){this.value="round time:  ".concat(t,":").concat(e),clearInterval(this.intervalID),this.node.scale(1.5),this.node.pin({alignY:.55})}},{key:"startCountDownTimer",value:function(t){var e;this.intervalID=setInterval((e=this,function(){e.updateCountDownTimer(t)}),1e3)}},{key:"updateCountDownTimer",value:function(t){var e=this.getCurrentTime();e-1==0?(this.expire.emit(),clearInterval(this.intervalID)):this.setCountDownTimer(e-1)}},{key:"getCurrentTime",value:function(){var t=ct(this.value.split(":"),2),e=t[0],n=t[1];return e=parseInt(e),n=parseInt(n),n+=60*e}},{key:"setCountDownTimer",value:function(t){var e=Math.floor(t/60),n="".concat(t%60).padStart(2,"0");this.value="".concat(e,":").concat(n)}},{key:"addTime",value:function(){var t=this.getCurrentTime();this.setCountDownTimer(t+5)}}])&&ft(e.prototype,n),r&&ft(e,r),u}(ut.a);function _t(t){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gt(t,e,n){return(gt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ot(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function wt(t,e){return(wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ot(t);if(e){var i=Ot(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return kt(this,n)}}function kt(t,e){return!e||"object"!==_t(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ot(t){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wt(t,e)}(u,t);var e,n,r,o=xt(u);function u(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return bt(this,u),(t=o.call(this,{alignY:.95})).balance=e,t.bankCrystal=new i.a,t.showEndBalance=new i.a,t}return e=u,(n=[{key:"start",value:function(t){var e=this;gt(Ot(u.prototype),"start",this).call(this,t),this.bankCrystal.on((function(){return e.updateBalance()})),this.showEndBalance.on((function(){return e.displayEndBalance()}))}},{key:"updateBalance",value:function(){this.value="crystals:  ".concat(this.balance+=1)}},{key:"displayEndBalance",value:function(){this.value="crystals collected: ".concat(this.balance),this.node.scale(1.5),this.node.pin({alignY:.45})}}])&&mt(e.prototype,n),r&&mt(e,r),u}(ut.a),St=n(37);function Rt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Tt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,u;return e=t,(n=[{key:"start",value:function(t){var e=new i.a,n=new _,u=new ot,s=new dt(r.a.initTimeLimit),c=new jt(r.a.initBalance),a=new N(r.a.serverUrl);n.start(t),s.start(t),c.start(t),u.start(t),a.start(t),(new St.a).start(t);var f=a.shuttleSet.add();n.triggerUntil(f.remove,f.input),e.trigger(f.remove).trigger(c.showEndBalance).trigger(s.showTotalTime),s.expire.trigger(e),u.detect([f],a.rockSet).trigger(o.a.explosion).trigger(e),u.detect(a.rockSet,a.projectileSet).triggerLeft((function(t){return t.shoot})).triggerRight((function(t){return t.remove})),u.detect([f],a.crystalSet).trigger(s.extendTimer).trigger(c.bankCrystal).trigger(o.a.crystalCapture).triggerRight((function(t){return t.remove})),f.cannon.fire.on((function(t){return a.projectileSet.add(t)})),u.detect([f],a.powerupSet).triggerLeft((function(t){return t.cannon.arm})).trigger(o.a.powerupCapture).triggerRight((function(t){return t.remove})),t.background(r.a.backgroundColor),t.viewbox(r.a.viewbox.width,r.a.viewbox.height,"in")}}])&&Rt(e.prototype,n),u&&Rt(e,u),t}()},function(t,e,n){"use strict";n.r(e),function(t){var e=n(23),r=n(0),i=n(38);e.a.forEach((function(e){return t(e)})),t((function(t){var e=new r.a,n=new i.a;t.on("viewport",(function(t){return e.emit(t)})),e.once((function(){return n.start(t)}))}))}.call(this,n(7))},function(t,e,n){t.exports=n(3),t.exports.Matrix=n(22),t.exports.Texture=n(19),n(42),n(44),n(45),n(9),n(11),n(47)},function(t,e){t.exports=function(){var t=0;function e(e,n){return t+=n="number"==typeof n&&n>=1?n:1,function(){e&&e.apply(this,arguments),n>0&&(n--,t--,r())}}var n=[];function r(){if(0===t)for(;n.length;)setTimeout(n.shift(),0)}return e.then=function(e){0===t?setTimeout(e,0):n.push(e)},e}},function(t,e,n){var r=n(3),i=n(19),o=n(15),u=n(8),s=n(16),c=n(43),a={},f=[];function h(t){h._super.call(this);var e=this;v(t,"filter"),v(t,"cutouts"),v(t,"sprites"),v(t,"factory");var n=t.map||t.filter,r=t.ppu||t.ratio||1,i=t.trim||0,u=t.textures,a=t.factory,f=t.cutouts||t.sprites;function l(t){if(!t||s.fn(t.draw))return t;t=o({},t),s.fn(n)&&(t=n(t)),1!=r&&(t.x*=r,t.y*=r,t.width*=r,t.height*=r,t.top*=r,t.bottom*=r,t.left*=r,t.right*=r),0!=i&&(t.x+=i,t.y+=i,t.width-=2*i,t.height-=2*i,t.top-=i,t.bottom-=i,t.left-=i,t.right-=i);var u=e.pipe();return u.top=t.top,u.bottom=t.bottom,u.left=t.left,u.right=t.right,u.src(t.x,t.y,t.width,t.height),u}function p(t){if(u){if(s.fn(u))return u(t);if(s.hash(u))return u[t]}if(f){for(var e=null,n=0,r=0;r<f.length;r++)c.startsWith(f[r].name,t)&&(0===n?e=f[r]:1===n?e=[e,f[r]]:e.push(f[r]),n++);return 0===n&&s.fn(a)&&(e=function(e){return a(t+(e||""))}),e}}this.select=function(t){if(!t)return new y(this.pipe());var e=p(t);return e?new y(e,p,l):void 0}}r.atlas=function(t){var e=s.fn(t.draw)?t:new h(t);t.name&&(a[t.name]=e),f.push(e),v(t,"imagePath"),v(t,"imageRatio");var n=t.imagePath,i=t.imageRatio||1;return s.string(t.image)?n=t.image:s.hash(t.image)&&(n=t.image.src||t.image.url,i=t.image.ratio||i),n&&r.preload((function(t){n=r.resolve(n),r.config("image-loader")(n,(function(n){e.src(n,i),t()}),(function(e){t()}))})),e},h._super=i,h.prototype=u(h._super.prototype);var l=new i;l.x=l.y=l.width=l.height=0,l.pipe=l.src=l.dest=function(){return this},l.draw=function(){};var p=new y(l);function y(t,e,n){function r(t,i){return t?s.fn(t.draw)?t:s.hash(t)&&s.number(t.width)&&s.number(t.height)&&s.fn(n)?n(t):s.hash(t)&&s.defined(i)?r(t[i]):s.fn(t)?r(t(i)):s.array(t)?r(t[0]):s.string(t)&&s.fn(e)?r(e(t)):void 0:l}this.one=function(e){return r(t,e)},this.array=function(e){var n=s.array(e)?e:[];if(s.array(t))for(var i=0;i<t.length;i++)n[i]=r(t[i]);else n[0]=r(t);return n}}function v(t,e,n){e in t&&console.log(n?n.replace("%name",e):"'"+e+"' field of texture atlas is deprecated.")}r.texture=function(t){if(!s.string(t))return new y(t);var e,n,r=null;for((n=t.indexOf(":"))>0&&t.length>n+1&&(r=(e=a[t.slice(0,n)])&&e.select(t.slice(n+1))),!r&&(e=a[t])&&(r=e.select()),n=0;!r&&n<f.length;n++)r=f[n].select(t);return r||(console.error("Texture not found: "+t),r=p),r},t.exports=h},function(t,e){t.exports.startsWith=function(t,e){return"string"==typeof t&&"string"==typeof e&&t.substring(0,e.length)==e}},function(t,e,n){var r=n(3),i=n(16),o=0;function u(t,e){f(e),f(t),e.remove(),t._last&&(t._last._next=e,e._prev=t._last),e._parent=t,t._last=e,t._first||(t._first=e),e._parent._flag(e,!0),e._ts_parent=++o,t._ts_children=++o,t.touch()}function s(t,e){f(e),f(t),e.remove(),t._first&&(t._first._prev=e,e._next=t._first),e._parent=t,t._first=e,t._last||(t._last=e),e._parent._flag(e,!0),e._ts_parent=++o,t._ts_children=++o,t.touch()}function c(t,e){f(t),f(e),t.remove();var n=e._parent,r=e._prev;e._prev=t,r&&(r._next=t)||n&&(n._first=t),t._parent=n,t._prev=r,t._next=e,t._parent._flag(t,!0),t._ts_parent=++o,t.touch()}function a(t,e){f(t),f(e),t.remove();var n=e._parent,r=e._next;e._next=t,r&&(r._prev=t)||n&&(n._last=t),t._parent=n,t._prev=e,t._next=r,t._parent._flag(t,!0),t._ts_parent=++o,t.touch()}function f(t){if(t&&t instanceof r)return t;throw"Invalid node: "+t}r.prototype._label="",r.prototype._visible=!0,r.prototype._parent=null,r.prototype._next=null,r.prototype._prev=null,r.prototype._first=null,r.prototype._last=null,r.prototype._attrs=null,r.prototype._flags=null,r.prototype.toString=function(){return"["+this._label+"]"},r.prototype.id=function(t){return this.label(t)},r.prototype.label=function(t){return void 0===t?this._label:(this._label=t,this)},r.prototype.attr=function(t,e){return void 0===e?null!==this._attrs?this._attrs[t]:void 0:((null!==this._attrs?this._attrs:this._attrs={})[t]=e,this)},r.prototype.visible=function(t){return void 0===t?this._visible:(this._visible=t,this._parent&&(this._parent._ts_children=++o),this._ts_pin=++o,this.touch(),this)},r.prototype.hide=function(){return this.visible(!1)},r.prototype.show=function(){return this.visible(!0)},r.prototype.parent=function(){return this._parent},r.prototype.next=function(t){for(var e=this._next;e&&t&&!e._visible;)e=e._next;return e},r.prototype.prev=function(t){for(var e=this._prev;e&&t&&!e._visible;)e=e._prev;return e},r.prototype.first=function(t){for(var e=this._first;e&&t&&!e._visible;)e=e._next;return e},r.prototype.last=function(t){for(var e=this._last;e&&t&&!e._visible;)e=e._prev;return e},r.prototype.visit=function(t,e){var n=t.reverse,r=t.visible;if(!t.start||!t.start(this,e)){for(var i,o=n?this.last(r):this.first(r);i=o;)if(o=n?i.prev(r):i.next(r),i.visit(t,e))return!0;return t.end&&t.end(this,e)}},r.prototype.append=function(t,e){if(i.array(t))for(var n=0;n<t.length;n++)u(this,t[n]);else if(void 0!==e)for(n=0;n<arguments.length;n++)u(this,arguments[n]);else void 0!==t&&u(this,t);return this},r.prototype.prepend=function(t,e){if(i.array(t))for(var n=t.length-1;n>=0;n--)s(this,t[n]);else if(void 0!==e)for(n=arguments.length-1;n>=0;n--)s(this,arguments[n]);else void 0!==t&&s(this,t);return this},r.prototype.appendTo=function(t){return u(t,this),this},r.prototype.prependTo=function(t){return s(t,this),this},r.prototype.insertNext=function(t,e){if(i.array(t))for(var n=0;n<t.length;n++)a(t[n],this);else if(void 0!==e)for(n=0;n<arguments.length;n++)a(arguments[n],this);else void 0!==t&&a(t,this);return this},r.prototype.insertPrev=function(t,e){if(i.array(t))for(var n=t.length-1;n>=0;n--)c(t[n],this);else if(void 0!==e)for(n=arguments.length-1;n>=0;n--)c(arguments[n],this);else void 0!==t&&c(t,this);return this},r.prototype.insertAfter=function(t){return a(this,t),this},r.prototype.insertBefore=function(t){return c(this,t),this},r.prototype.remove=function(t,e){if(void 0!==t){if(i.array(t))for(var n=0;n<t.length;n++)f(t[n]).remove();else if(void 0!==e)for(n=0;n<arguments.length;n++)f(arguments[n]).remove();else f(t).remove();return this}return this._prev&&(this._prev._next=this._next),this._next&&(this._next._prev=this._prev),this._parent&&(this._parent._first===this&&(this._parent._first=this._next),this._parent._last===this&&(this._parent._last=this._prev),this._parent._flag(this,!1),this._parent._ts_children=++o,this._parent.touch()),this._prev=this._next=this._parent=null,this._ts_parent=++o,this},r.prototype.empty=function(){for(var t,e=this._first;t=e;)e=t._next,t._prev=t._next=t._parent=null,this._flag(t,!1);return this._first=this._last=null,this._ts_children=++o,this.touch(),this},r.prototype.touch=function(){return this._ts_touch=++o,this._parent&&this._parent.touch(),this},r.prototype._flag=function(t,e){if(void 0===e)return null!==this._flags&&this._flags[t]||0;if("string"==typeof t&&(e?(this._flags=this._flags||{},!this._flags[t]&&this._parent&&this._parent._flag(t,!0),this._flags[t]=(this._flags[t]||0)+1):this._flags&&this._flags[t]>0&&(1==this._flags[t]&&this._parent&&this._parent._flag(t,!1),this._flags[t]=this._flags[t]-1)),"object"==typeof t&&t._flags)for(var n in t._flags)t._flags[n]>0&&this._flag(n,e);return this},r.prototype.hitTest=function(t){return!!this.attr("spy")||t.x>=0&&t.x<=this._pin._width&&t.y>=0&&t.y<=this._pin._height},t.exports=r},function(t,e,n){n(46)(n(3).prototype,(function(t,e,n){t._flag(e,n)}))},function(t,e){t.exports=function(t,e){t._listeners=null,t.on=t.listen=function(t,n){if(!t||!t.length||"function"!=typeof n)return this;if(null===this._listeners&&(this._listeners={}),t=("string"!=typeof t&&"function"==typeof t.join?t.join(" "):t).match(/\S+/g))for(var r=0;r<t.length;r++){var i=t[r];this._listeners[i]=this._listeners[i]||[],this._listeners[i].push(n),"function"==typeof e&&e(this,i,!0)}return this},t.off=function(t,n){if(!t||!t.length||"function"!=typeof n)return this;if(null===this._listeners)return this;if(t=("string"!=typeof t&&"function"==typeof t.join?t.join(" "):t).match(/\S+/g))for(var r=0;r<t.length;r++){var i,o=t[r],u=this._listeners[o];u&&(i=u.indexOf(n))>=0&&(u.splice(i,1),u.length||delete this._listeners[o],"function"==typeof e&&e(this,o,!1))}return this},t.listeners=function(t){return this._listeners&&this._listeners[t]},t.publish=function(t,e){var n=this.listeners(t);if(!n||!n.length)return 0;for(var r=0;r<n.length;r++)n[r].apply(this,e);return n.length},t.trigger=function(t,e){return this.publish(t,e),this}}},function(t,e,n){var r=n(3);n(9),n(11);var i=n(14),o=n(8),u=n(15);function s(t,e){s._super.call(this),this.label("Root");var n=!0,r=this,o=0,u=function(s){if(!0!==n){i.tick=i.node=i.draw=0;var c=o||s,a=s-c;o=s;var f=r._tick(a,s,c);r._mo_touch!=r._ts_touch?(r._mo_touch=r._ts_touch,e(r),t(u)):f?t(u):n=!0,i.fps=a?1e3/a:0}};this.start=function(){return this.resume()},this.resume=function(){return n&&(this.publish("resume"),n=!1,t(u)),this},this.pause=function(){return n||this.publish("pause"),n=!0,this},this.touch_root=this.touch,this.touch=function(){return this.resume(),this.touch_root()}}s._super=r,s.prototype=o(s._super.prototype),r.root=function(t,e){return new s(t,e)},s.prototype.background=function(t){return this},s.prototype.viewport=function(t,e,n){if(void 0===t)return u({},this._viewport);this._viewport={width:t,height:e,ratio:n||1},this.viewbox();var r=u({},this._viewport);return this.visit({start:function(t){if(!t._flag("viewport"))return!0;t.publish("viewport",[r])}}),this},s.prototype.viewbox=function(t,e,n){"number"==typeof t&&"number"==typeof e&&(this._viewbox={width:t,height:e,mode:/^(in|out|in-pad|out-crop)$/.test(n)?n:"in-pad"});var r=this._viewbox,i=this._viewport;return i&&r?(this.pin({width:r.width,height:r.height}),this.scaleTo(i.width,i.height,r.mode)):i&&this.pin({width:i.width,height:i.height}),this}},function(t,e,n){var r=n(3),i=n(19);r.canvas=function(t,e,n){"string"==typeof t?"object"==typeof e||("function"==typeof e&&(n=e),e={}):("function"==typeof t&&(n=t),e={},t="2d");var r=document.createElement("canvas"),o=r.getContext(t,e),u=new i(r);return u.context=function(){return o},u.size=function(t,e,n){return n=n||1,r.width=t*n,r.height=e*n,this.src(r,n),this},u.canvas=function(t){return"function"==typeof t?t.call(this,o):void 0===t&&"function"==typeof n&&n.call(this,o),this},"function"==typeof n&&n.call(u,o),u}},function(t,e,n){var r=n(3);n(9),n(11);var i=n(50),o=n(8);function u(){u._super.call(this),this.label("Image"),this._textures=[],this._image=null}t.exports=u,r.image=function(t){var e=new u;return t&&e.image(t),e},u._super=r,u.prototype=o(u._super.prototype),u.prototype.setImage=function(t,e,n){return this.image(t,e,n)},u.prototype.image=function(t){return this._image=r.texture(t).one(),this.pin("width",this._image?this._image.width:0),this.pin("height",this._image?this._image.height:0),this._textures[0]=this._image.pipe(),this._textures.length=1,this},u.prototype.tile=function(t){return this._repeat(!1,t),this},u.prototype.stretch=function(t){return this._repeat(!0,t),this},u.prototype._repeat=function(t,e){var n=this;function r(t,e,r,i,o,u,s,c,a){var f=n._textures.length>t?n._textures[t]:n._textures[t]=n._image.pipe();f.src(e,r,i,o),f.dest(u,s,c,a)}this.untick(this._repeatTicker),this.tick(this._repeatTicker=function(){if(this._mo_stretch!=this._pin._ts_transform){this._mo_stretch=this._pin._ts_transform;var n=this.pin("width"),o=this.pin("height");this._textures.length=i(this._image,n,o,t,e,r)}})}},function(t,e){t.exports=function(t,e,n,r,i,o){var u=t.width,s=t.height,c=t.left,a=t.right,f=t.top,h=t.bottom;u=u-(c="number"==typeof c&&c==c?c:0)-(a="number"==typeof a&&a==a?a:0),s=s-(f="number"==typeof f&&f==f?f:0)-(h="number"==typeof h&&h==h?h:0),i||(e=Math.max(e-c-a,0),n=Math.max(n-f-h,0));var l=0;if(f>0&&c>0&&o(l++,0,0,c,f,0,0,c,f),h>0&&c>0&&o(l++,0,s+f,c,h,0,n+f,c,h),f>0&&a>0&&o(l++,u+c,0,a,f,e+c,0,a,f),h>0&&a>0&&o(l++,u+c,s+f,a,h,e+c,n+f,a,h),r)f>0&&o(l++,c,0,u,f,c,0,e,f),h>0&&o(l++,c,s+f,u,h,c,n+f,e,h),c>0&&o(l++,0,f,c,s,0,f,c,n),a>0&&o(l++,u+c,f,a,s,e+c,f,a,n),o(l++,c,f,u,s,c,f,e,n);else for(var p,y=c,v=e;v>0;){p=Math.min(u,v),v-=u;for(var d,_=f,b=n;b>0;)d=Math.min(s,b),b-=s,o(l++,c,f,p,d,y,_,p,d),v<=0&&(c&&o(l++,0,f,c,d,0,_,c,d),a&&o(l++,u+c,f,a,d,y+p,_,a,d)),_+=d;f&&o(l++,c,0,p,f,y,0,p,f),h&&o(l++,c,s+f,p,h,y,_,p,h),y+=p}return l}},function(t,e,n){var r=n(3);n(9),n(11);var i=n(8),o=n(20);function u(){u._super.call(this),this.label("Anim"),this._textures=[],this._fps=r.Anim.FPS,this._ft=1e3/this._fps,this._time=-1,this._repeat=0,this._index=0,this._frames=[];var t=0;this.tick((function(e,n,r){if(!(this._time<0||this._frames.length<=1)){var i=t!=r;if(t=n,i)return!0;if(this._time+=e,this._time<this._ft)return!0;var o=this._time/this._ft|0;return this._time-=o*this._ft,this.moveFrame(o),!(this._repeat>0&&(this._repeat-=o)<=0)||(this.stop(),this._callback&&this._callback(),!1)}}),!1)}r.anim=function(t,e){var n=new u;return n.frames(t).gotoFrame(0),e&&n.fps(e),n},u._super=r,u.prototype=i(u._super.prototype),r.Anim={FPS:15},u.prototype.fps=function(t){return void 0===t?this._fps:(this._fps=t>0?t:r.Anim.FPS,this._ft=1e3/this._fps,this)},u.prototype.setFrames=function(t,e,n){return this.frames(t,e,n)},u.prototype.frames=function(t){return this._index=0,this._frames=r.texture(t).array(),this.touch(),this},u.prototype.length=function(){return this._frames?this._frames.length:0},u.prototype.gotoFrame=function(t,e){return this._index=0|o.rotate(t,this._frames.length),e=e||!this._textures[0],this._textures[0]=this._frames[this._index],e&&(this.pin("width",this._textures[0].width),this.pin("height",this._textures[0].height)),this.touch(),this},u.prototype.moveFrame=function(t){return this.gotoFrame(this._index+t)},u.prototype.repeat=function(t,e){return this._repeat=t*this._frames.length-1,this._callback=e,this.play(),this},u.prototype.play=function(t){return void 0!==t?(this.gotoFrame(t),this._time=0):this._time<0&&(this._time=0),this.touch(),this},u.prototype.stop=function(t){return this._time=-1,void 0!==t&&this.gotoFrame(t),this}},function(t,e,n){var r=n(3);n(9),n(11);var i=n(8),o=n(16);function u(){u._super.call(this),this.label("String"),this._textures=[]}r.string=function(t){return(new u).frames(t)},u._super=r,u.prototype=i(u._super.prototype),u.prototype.setFont=function(t,e,n){return this.frames(t,e,n)},u.prototype.frames=function(t){return this._textures=[],"string"==typeof t?(t=r.texture(t),this._item=function(e){return t.one(e)}):"object"==typeof t?this._item=function(e){return t[e]}:"function"==typeof t&&(this._item=t),this},u.prototype.setValue=function(t,e,n){return this.value(t,e,n)},u.prototype.value=function(t){if(void 0===t)return this._value;if(this._value===t)return this;this._value=t,null===t?t="":"string"==typeof t||o.array(t)||(t=t.toString()),this._spacing=this._spacing||0;for(var e=0,n=0,r=0;r<t.length;r++){var i=this._textures[r]=this._item(t[r]);e+=r>0?this._spacing:0,i.dest(e,0),e+=i.width,n=Math.max(n,i.height)}return this.pin("width",e),this.pin("height",n),this._textures.length=t.length,this}},function(t,e,n){var r=n(3);n(9),n(11);n(8);r.row=function(t){return r.create().row(t).label("Row")},r.prototype.row=function(t){return this.sequence("row",t),this},r.column=function(t){return r.create().column(t).label("Row")},r.prototype.column=function(t){return this.sequence("column",t),this},r.sequence=function(t,e){return r.create().sequence(t,e).label("Sequence")},r.prototype.sequence=function(t,e){return this._padding=this._padding||0,this._spacing=this._spacing||0,this.untick(this._layoutTiker),this.tick(this._layoutTiker=function(){if(this._mo_seq!=this._ts_touch){this._mo_seq=this._ts_touch;var n=this._mo_seqAlign!=this._ts_children;this._mo_seqAlign=this._ts_children;for(var r,i=0,o=0,u=this.first(!0),s=!0;r=u;){u=r.next(!0),r.matrix(!0);var c=r.pin("boxWidth"),a=r.pin("boxHeight");"column"==t?(!s&&(o+=this._spacing),r.pin("offsetY")!=o&&r.pin("offsetY",o),i=Math.max(i,c),o+=a,n&&r.pin("alignX",e)):"row"==t&&(!s&&(i+=this._spacing),r.pin("offsetX")!=i&&r.pin("offsetX",i),i+=c,o=Math.max(o,a),n&&r.pin("alignY",e)),s=!1}i+=2*this._padding,o+=2*this._padding,this.pin("width")!=i&&this.pin("width",i),this.pin("height")!=o&&this.pin("height",o)}}),this},r.box=function(){return r.create().box().label("Box")},r.prototype.box=function(){return this._padding=this._padding||0,this.untick(this._layoutTiker),this.tick(this._layoutTiker=function(){if(this._mo_box!=this._ts_touch){this._mo_box=this._ts_touch;for(var t,e=0,n=0,r=this.first(!0);t=r;){r=t.next(!0),t.matrix(!0);var i=t.pin("boxWidth"),o=t.pin("boxHeight");e=Math.max(e,i),n=Math.max(n,o)}e+=2*this._padding,n+=2*this._padding,this.pin("width")!=e&&this.pin("width",e),this.pin("height")!=n&&this.pin("height",n)}}),this},r.layer=function(){return r.create().layer().label("Layer")},r.prototype.layer=function(){return this.untick(this._layoutTiker),this.tick(this._layoutTiker=function(){var t=this.parent();if(t){var e=t.pin("width");this.pin("width")!=e&&this.pin("width",e);var n=t.pin("height");this.pin("height")!=n&&this.pin("height",n)}},!0),this},r.prototype.padding=function(t){return this._padding=t,this},r.prototype.spacing=function(t){return this._spacing=t,this}},function(t,e,n){var r=n(55),i=n(3),o=n(9);function u(t,e,n){this._end={},this._duration=e||400,this._delay=n||0,this._owner=t,this._time=0}function s(t,e,n,r){"number"==typeof t.pin(n)?e[n]=r:"number"==typeof t.pin(n+"X")&&"number"==typeof t.pin(n+"Y")&&(e[n+"X"]=r,e[n+"Y"]=r)}i.prototype.tween=function(t,e,n){if("number"!=typeof t?(n=t,e=0,t=0):"number"!=typeof e&&(n=e,e=0),!this._tweens){this._tweens=[];var r=0;this.tick((function(t,e,n){if(this._tweens.length){var i=r!=n;if(r=e,i)return!0;var o=this._tweens[0],u=o.tick(this,t,e,n);if(u&&o===this._tweens[0]&&this._tweens.shift(),"function"==typeof u)try{u.call(this)}catch(t){console.log(t)}return"object"==typeof u&&this._tweens.unshift(u),!0}}),!0)}this.touch(),n||(this._tweens.length=0);var i=new u(this,t,e);return this._tweens.push(i),i},u.prototype.tick=function(t,e,n,r){if(this._time+=e,!(this._time<this._delay)){var i,o,u=this._time-this._delay;if(!this._start)for(var s in this._start={},this._end)this._start[s]=this._owner.pin(s);u<this._duration?(i=u/this._duration,o=!1):(i=1,o=!0),"function"==typeof this._easing&&(i=this._easing(i));var c=1-i;for(var s in this._end)this._owner.pin(s,this._start[s]*c+this._end[s]*i);return o?this._next||this._done||!0:void 0}},u.prototype.tween=function(t,e){return this._next=new u(this._owner,t,e)},u.prototype.duration=function(t){return this._duration=t,this},u.prototype.delay=function(t){return this._delay=t,this},u.prototype.ease=function(t){return this._easing=r(t),this},u.prototype.done=function(t){return this._done=t,this},u.prototype.hide=function(){return this.done((function(){this.hide()})),this},u.prototype.remove=function(){return this.done((function(){this.remove()})),this},u.prototype.pin=function(t,e){if("object"==typeof t)for(var n in t)s(this._owner,this._end,n,t[n]);else void 0!==e&&s(this._owner,this._end,t,e);return this},o._add_shortcuts(u),u.prototype.then=function(t){return this.done(t),this},u.prototype.clear=function(t){return this},t.exports=u},function(t,e){function n(t){return t}var r={},i={},o={};function u(t){if("function"==typeof t)return t;if("string"!=typeof t)return n;var e=r[t];if(e)return e;var u=/^(\w+)(-(in|out|in-out|out-in))?(\((.*)\))?$/i.exec(t);if(!u||!u.length)return n;var s=o[u[1]],c=i[u[3]],a=u[5];return e=s&&s.fn?s.fn:s&&s.fc?s.fc.apply(s.fc,a&&a.replace(/\s+/,"").split(",")):n,c&&(e=c.fn(e)),r[t]=e,e}u.add=function(t){for(var e=(t.name||t.mode).split(/\s+/),n=0;n<e.length;n++){var r=e[n];r&&((t.name?o:i)[r]=t)}},u.add({mode:"in",fn:function(t){return t}}),u.add({mode:"out",fn:function(t){return function(e){return 1-t(1-e)}}}),u.add({mode:"in-out",fn:function(t){return function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2}}}),u.add({mode:"out-in",fn:function(t){return function(e){return e<.5?1-t(2*(1-e))/2:t(2*e)/2}}}),u.add({name:"linear",fn:function(t){return t}}),u.add({name:"quad",fn:function(t){return t*t}}),u.add({name:"cubic",fn:function(t){return t*t*t}}),u.add({name:"quart",fn:function(t){return t*t*t*t}}),u.add({name:"quint",fn:function(t){return t*t*t*t*t}}),u.add({name:"sin sine",fn:function(t){return 1-Math.cos(t*Math.PI/2)}}),u.add({name:"exp expo",fn:function(t){return 0==t?0:Math.pow(2,10*(t-1))}}),u.add({name:"circle circ",fn:function(t){return 1-Math.sqrt(1-t*t)}}),u.add({name:"bounce",fn:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}}),u.add({name:"poly",fc:function(t){return function(e){return Math.pow(e,t)}}}),u.add({name:"elastic",fc:function(t,e){t=t||1;var n=(e=e||.45)/(2*Math.PI)*Math.asin(1/t);return function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*(2*Math.PI)/e)}}}),u.add({name:"back",fc:function(t){return t=void 0!==t?t:1.70158,function(e){return e*e*((t+1)*e-t)}}}),t.exports=u},function(t,e,n){function r(t,e){if(this instanceof r){var n=t.viewport().ratio||1;t.on("viewport",(function(t){n=t.ratio||n})),this.x=0,this.y=0,this.toString=function(){return(0|this.x)+"x"+(0|this.y)},this.locate=function(t){!function(t,e,n){e.touches&&e.touches.length?(n.x=e.touches[0].clientX,n.y=e.touches[0].clientY):(n.x=e.clientX,n.y=e.clientY);var r=t.getBoundingClientRect();n.x-=r.left,n.y-=r.top,n.x-=0|t.clientLeft,n.y-=0|t.clientTop}(e,t,this),this.x*=n,this.y*=n},this.lookup=function(e,n){this.type=e,this.root=t,this.event=null,n.length=0,this.collect=n,this.root.visit(this.visitor,this)},this.publish=function(e,n,r){if(this.type=e,this.root=t,this.event=n,this.collect=!1,this.timeStamp=Date.now(),r){for(;r.length&&!this.visitor.end(r.shift(),this););r.length=0}else this.root.visit(this.visitor,this)},this.visitor={reverse:!0,visible:!0,start:function(t,e){return!t._flag(e.type)},end:function(t,e){i.raw=e.event,i.type=e.type,i.timeStamp=e.timeStamp,i.abs.x=e.x,i.abs.y=e.y;var n=t.listeners(e.type);if(n&&(t.matrix().inverse().map(e,i),(t===e.root||t.hitTest(i))&&(e.collect&&e.collect.push(t),e.event))){for(var r=!1,o=0;o<n.length;o++)r=!!n[o].call(t,i)||r;return r}}}}}n(3)._load((function(t,e){r.subscribe(t,e)})),r.CLICK="click",r.START="touchstart mousedown",r.MOVE="touchmove mousemove",r.END="touchend mouseup",r.CANCEL="touchcancel mousecancel",r.subscribe=function(t,e){if(!t.mouse){t.mouse=new r(t,e),e.addEventListener("touchstart",o),e.addEventListener("touchend",s),e.addEventListener("touchmove",u),e.addEventListener("touchcancel",c),e.addEventListener("mousedown",o),e.addEventListener("mouseup",s),e.addEventListener("mousemove",u),document.addEventListener("mouseup",c),window.addEventListener("blur",c);var n=[],i=[]}function o(e){e.preventDefault(),t.mouse.locate(e),t.mouse.publish(e.type,e),t.mouse.lookup("click",n),t.mouse.lookup("mousecancel",i)}function u(e){e.preventDefault(),t.mouse.locate(e),t.mouse.publish(e.type,e)}function s(e){e.preventDefault(),t.mouse.publish(e.type,e),n.length&&t.mouse.publish("click",e,n),i.length=0}function c(e){i.length&&t.mouse.publish("mousecancel",e,i),n.length=0}};var i={},o={};function u(t,e,n){Object.defineProperty(t,e,{value:n})}u(i,"clone",(function(t){return(t=t||{}).x=this.x,t.y=this.y,t})),u(i,"toString",(function(){return(0|this.x)+"x"+(0|this.y)+" ("+this.abs+")"})),u(i,"abs",o),u(o,"clone",(function(t){return(t=t||{}).x=this.x,t.y=this.y,t})),u(o,"toString",(function(){return(0|this.x)+"x"+(0|this.y)})),t.exports=r},function(t,e,n){var r,i=n(3);i._supported=!(!(r=document.createElement("canvas")).getContext||!r.getContext("2d")),window.addEventListener("load",(function(){i._supported&&i.start()}),!1),i.config({"app-loader":function(t,e){var n,r=(e=e||{}).canvas,o=null,u=!1,s=0,c=0;"string"==typeof r&&(r=document.getElementById(r));r||(r=document.getElementById("cutjs")||document.getElementById("stage"));if(!r){u=!0,(r=document.createElement("canvas")).style.position="absolute",r.style.top="0",r.style.left="0";var a=document.body;a.insertBefore(r,a.firstChild)}o=r.getContext("2d");var f=window.devicePixelRatio||1,h=o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1;n=f/h;var l=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)};var p=i.root(l,y);function y(){o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,s,c),p.render(o)}function v(){u?(s=window.innerWidth>0?window.innerWidth:screen.width,c=window.innerHeight>0?window.innerHeight:screen.height,r.style.width=s+"px",r.style.height=c+"px"):(s=r.clientWidth,c=r.clientHeight),s*=n,c*=n,r.width===s&&r.height===c||(r.width=s,r.height=c,p.viewport(s,c,n),y())}p.background=function(t){return r.style.backgroundColor=t,this},t(p,r),v(),window.addEventListener("resize",v,!1),window.addEventListener("orientationchange",v,!1)},"image-loader":function(t,e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src=t}})},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(t){r=u}}();var c,a=[],f=!1,h=-1;function l(){f&&c&&(f=!1,c.length?a=c.concat(a):h=-1,a.length&&p())}function p(){if(!f){var t=s(l);f=!0;for(var e=a.length;e;){for(c=a,a=[];++h<e;)c&&c[h].run();h=-1,e=a.length}c=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function y(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];a.push(new y(t,e)),1!==a.length||f||s(p)},y.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}}]);